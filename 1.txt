#include <sys/time.h>
#include <signal.h>
#include <stdio.h>

void sig_timer(int signo)
{
    if(signo == SIGVTALRM)
    {
        printf("time over/n");
        exit(0);
    }
    else
        printf("other signo/n");
}
int main()
{
    struct itimerval timer = {0};
    timer.it_value.tv_sec = 5;
    timer.it_value.tv_usec = 10;
    timer.it_interval.tv_sec = 0;
    timer.it_interval.tv_usec = 0;
    struct sigaction st_sig = {0};
    st_sig.sa_handler = sig_timer;
    if(sigaction(SIGVTALRM ,&st_sig,NULL) < 0)
        printf("error to set sig proc/n");
    if(setitimer(ITIMER_VIRTUAL,&timer,NULL) < 0)
    {
        printf("error to set timer/n");
    }
    sleep(10);
    printf("sleep back/n");
    return 0;
}
